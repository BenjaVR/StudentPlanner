service cloud.firestore {
    match /databases/{database}/documents {
        match /{document=**} {
            // Block everything by default
            allow read, write: if false;
        }

        match /schools/{school} {
            allow read;
            allow write: if hasFields(['name'])
                         && request.resource.data.name.size() > 0;
        }
    }
    

    function hasFields(fieldNames) {
        return request.resource.data.keys().hasAll(fieldNames);
    }
}
